<!DOCTYPE html>
<html>
<head>
    <title>Goals</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        .top-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            background-color: #f3f3f3;
            border-radius: 6px;
        }
        .back-btn {
            background-color: #555;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
            text-decoration: none;
        }
        .back-btn:hover { background-color: #333; }
        form input {
            margin: 5px;
            padding: 6px;
            border-radius: 4px;
            border: 1px solid #ccc;
        }
        button {
            padding: 6px 12px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        .add-btn { background-color: #28a745; color: white; }
        .add-btn:hover { background-color: #218838; }
        .reset-btn {
            background-color: #dc3545;
            color: white;
            margin-top: 10px;
        }
        .reset-btn:hover { background-color: #c82333; }

        .goal-container {
            margin-top: 20px;
        }
        .goal {
            background: #f9f9f9;
            padding: 10px;
            margin: 10px 0;
            border-radius: 8px;
            box-shadow: 0 0 4px rgba(0,0,0,0.1);
        }
        .progress-bar {
            background: #ddd;
            border-radius: 8px;
            overflow: hidden;
            margin-top: 5px;
        }
        .progress-fill {
            background: #4CAF50;
            height: 20px;
            width: 0%;
            text-align: center;
            color: white;
            font-size: 12px;
        }
    </style>
</head>
<body>
    <div class="top-bar">
        <h1>Goals</h1>
        <a href="/" class="back-btn">Back</a>
    </div>

    <h2>Set a New Goal</h2>
    <form method="POST">
        <input type="text" name="title" placeholder="Goal title" required>
        <input type="number" step="any" name="calories" placeholder="Calories goal">
        <input type="number" step="any" name="protein" placeholder="Protein (g)">
        <input type="number" step="any" name="carbs" placeholder="Carbs (g)">
        <input type="number" step="any" name="fats" placeholder="Fats (g)">
        <button type="submit" class="add-btn">Add Goal</button>
    </form>

    <form method="POST">
        <button type="submit" name="reset" value="1" class="reset-btn">Reset All Goals</button>
    </form>

    <div class="goal-container">
        <h2>Current Goals</h2>
        {% for g in goals %}
        <div class="goal">
            <h3>{{ g['title'] }}</h3>

            <label>Calories</label>
<div class="progress-bar">
    {% set cals_goal = g['calories']|float %}
    {% set cals_progress = g['progress']['calories']|float %}
    {% set cals_percent = (cals_progress / cals_goal * 100) if cals_goal else 0 %}
    <div class="progress-fill" style="width: {{ "%.2f"|format(cals_percent) }}%;">
        {{ cals_progress }}/{{ cals_goal }}
    </div>
</div>

<label>Protein</label>
<div class="progress-bar">
    {% set p_goal = g['protein']|float %}
    {% set p_progress = g['progress']['protein']|float %}
    {% set p_percent = (p_progress / p_goal * 100) if p_goal else 0 %}
    <div class="progress-fill" style="width: {{ "%.2f"|format(p_percent) }}%;">
        {{ p_progress }}/{{ p_goal }}
    </div>
</div>

<label>Carbs</label>
<div class="progress-bar">
    {% set c_goal = g['carbs']|float %}
    {% set c_progress = g['progress']['carbs']|float %}
    {% set c_percent = (c_progress / c_goal * 100) if c_goal else 0 %}
    <div class="progress-fill" style="width: {{ "%.2f"|format(c_percent) }}%;">
        {{ c_progress }}/{{ c_goal }}
    </div>
</div>

<label>Fats</label>
<div class="progress-bar">
    {% set f_goal = g['fats']|float %}
    {% set f_progress = g['progress']['fats']|float %}
    {% set f_percent = (f_progress / f_goal * 100) if f_goal else 0 %}
    <div class="progress-fill" style="width: {{ "%.2f"|format(f_percent) }}%;">
        {{ f_progress }}/{{ f_goal }}
    </div>
</div>

        </div>
        {% endfor %}
    </div>
</body>
</html>

